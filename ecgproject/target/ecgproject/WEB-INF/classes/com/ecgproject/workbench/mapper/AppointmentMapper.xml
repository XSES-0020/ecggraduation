<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ecgproject.workbench.mapper.AppointmentMapper">
  <resultMap id="BaseResultMap" type="com.ecgproject.workbench.domain.Appointment">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 24 16:34:19 CST 2022.
    -->
    <id column="appointment_id" jdbcType="VARCHAR" property="appointmentId" />
    <result column="appointment_createtime" jdbcType="VARCHAR" property="appointmentCreatetime" />
    <result column="appointment_status" jdbcType="VARCHAR" property="appointmentStatus" />
    <result column="appointment_taketime" jdbcType="VARCHAR" property="appointmentTaketime" />
    <result column="appointment_machine" jdbcType="VARCHAR" property="appointmentMachine" />
    <result column="appointment_department" jdbcType="VARCHAR" property="appointmentDepartment" />
    <result column="appointment_patient" jdbcType="VARCHAR" property="appointmentPatient" />
    <result column="appointment_doctor" jdbcType="VARCHAR" property="appointmentDoctor" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 24 16:34:19 CST 2022.
    -->
    appointment_id, appointment_createtime, appointment_status, appointment_taketime, 
    appointment_machine, appointment_department, appointment_patient, appointment_doctor
  </sql>

  <select id="selectAppointmentById" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 24 16:34:19 CST 2022.
    -->
    select 
    <include refid="Base_Column_List" />
    from appointment
    where appointment_id = #{appointmentId,jdbcType=VARCHAR}
  </select>

  <delete id="deleteById" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 24 16:34:19 CST 2022.
    -->
    delete from appointment
    where appointment_id = #{appointmentId,jdbcType=VARCHAR}
  </delete>

  <insert id="insertSelective" parameterType="com.ecgproject.workbench.domain.Appointment">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 24 16:34:19 CST 2022.
    -->
    insert into appointment
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="appointmentId != null">
        appointment_id,
      </if>
      <if test="appointmentCreatetime != null">
        appointment_createtime,
      </if>
      <if test="appointmentStatus != null">
        appointment_status,
      </if>
      <if test="appointmentTaketime != null">
        appointment_taketime,
      </if>
      <if test="appointmentMachine != null">
        appointment_machine,
      </if>
      <if test="appointmentDepartment != null">
        appointment_department,
      </if>
      <if test="appointmentPatient != null">
        appointment_patient,
      </if>
      <if test="appointmentDoctor != null">
        appointment_doctor,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="appointmentId != null">
        #{appointmentId,jdbcType=VARCHAR},
      </if>
      <if test="appointmentCreatetime != null">
        #{appointmentCreatetime,jdbcType=VARCHAR},
      </if>
      <if test="appointmentStatus != null">
        #{appointmentStatus,jdbcType=VARCHAR},
      </if>
      <if test="appointmentTaketime != null">
        #{appointmentTaketime,jdbcType=VARCHAR},
      </if>
      <if test="appointmentMachine != null">
        #{appointmentMachine,jdbcType=VARCHAR},
      </if>
      <if test="appointmentDepartment != null">
        #{appointmentDepartment,jdbcType=VARCHAR},
      </if>
      <if test="appointmentPatient != null">
        #{appointmentPatient,jdbcType=VARCHAR},
      </if>
      <if test="appointmentDoctor != null">
        #{appointmentDoctor,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.ecgproject.workbench.domain.Appointment">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 24 16:34:19 CST 2022.
    -->
    update appointment
    <set>
      <if test="appointmentCreatetime != null">
        appointment_createtime = #{appointmentCreatetime,jdbcType=VARCHAR},
      </if>
      <if test="appointmentStatus != null">
        appointment_status = #{appointmentStatus,jdbcType=VARCHAR},
      </if>
      <if test="appointmentTaketime != null">
        appointment_taketime = #{appointmentTaketime,jdbcType=VARCHAR},
      </if>
      <if test="appointmentMachine != null">
        appointment_machine = #{appointmentMachine,jdbcType=VARCHAR},
      </if>
      <if test="appointmentDepartment != null">
        appointment_department = #{appointmentDepartment,jdbcType=VARCHAR},
      </if>
      <if test="appointmentPatient != null">
        appointment_patient = #{appointmentPatient,jdbcType=VARCHAR},
      </if>
      <if test="appointmentDoctor != null">
        appointment_doctor = #{appointmentDoctor,jdbcType=VARCHAR},
      </if>
    </set>
    where appointment_id = #{appointmentId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.ecgproject.workbench.domain.Appointment">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 24 16:34:19 CST 2022.
    -->
    update appointment
    set appointment_createtime = #{appointmentCreatetime,jdbcType=VARCHAR},
      appointment_status = #{appointmentStatus,jdbcType=VARCHAR},
      appointment_taketime = #{appointmentTaketime,jdbcType=VARCHAR},
      appointment_machine = #{appointmentMachine,jdbcType=VARCHAR},
      appointment_department = #{appointmentDepartment,jdbcType=VARCHAR},
      appointment_patient = #{appointmentPatient,jdbcType=VARCHAR},
      appointment_doctor = #{appointmentDoctor,jdbcType=VARCHAR}
    where appointment_id = #{appointmentId,jdbcType=VARCHAR}
  </update>

  <select id="selectAppointmentByConditionForPage" parameterType="map" resultMap="BaseResultMap">
    select a.appointment_id,a.appointment_createtime,a.appointment_status,
    a.appointment_taketime,a.appointment_machine,u2.department_name as appointment_department,
    u1.patient_name as appointment_patient,u3.doctor_name as appointment_doctor
    from appointment a
    join patient u1 on a.appointment_patient=u1.patient_id
    left join department u2 on a.appointment_department=u2.department_id
    left join doctor u3 on a.appointment_doctor=u3.doctor_id
    <where>
      <if test="status!=null and status!=''">
        appointment_status=#{status}
      </if>
    </where>
    order by a.appointment_createtime desc
    limit #{beginNo},#{pageSize}
  </select>

  <select id="selectCountOfAppointmentByCondition" parameterType="map" resultType="int">
    select count(*)
    from appointment
    <where>
      <if test="status!=null and status!=''">
        appointment_status=#{status}
      </if>
    </where>
  </select>


  <insert id="insertAppointment" parameterType="com.ecgproject.workbench.domain.Appointment">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 24 16:34:19 CST 2022.
    -->
    insert into appointment (appointment_id, appointment_createtime,
    appointment_status, appointment_taketime,
    appointment_machine, appointment_department,
    appointment_patient, appointment_doctor)
    values (#{appointmentId,jdbcType=VARCHAR}, #{appointmentCreatetime,jdbcType=VARCHAR},
    #{appointmentStatus,jdbcType=VARCHAR}, #{appointmentTaketime,jdbcType=VARCHAR},
    #{appointmentMachine,jdbcType=VARCHAR}, #{appointmentDepartment,jdbcType=VARCHAR},
    #{appointmentPatient,jdbcType=VARCHAR}, #{appointmentDoctor,jdbcType=VARCHAR})
  </insert>

  <update id="updateAppointmentById" parameterType="map">
    update appointment
    set appointment_status=#{appointmentStatus},appointment_taketime=#{appointmentTaketime},appointment_machine=#{appointmentMachine}
    where appointment_id=#{appointmentId}
  </update>

</mapper>